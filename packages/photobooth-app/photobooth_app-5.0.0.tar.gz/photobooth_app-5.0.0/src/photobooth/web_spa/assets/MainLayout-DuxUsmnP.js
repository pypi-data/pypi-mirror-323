import{d as v,u as b,a as S,b as B,c as M,e as w,o as C,w as h,f as p,g as N,h as Q,i as A,j as T,k as $,r as L,l as d,m as c,n as l,p as m,Q as R,q,s as E,t as I,v as y}from"./index-wLdBJhHm.js";import{Q as O}from"./QPageSticky-Ci9jDzTQ.js";import{Q as P,a as V}from"./QLayout-CVtl6vwg.js";const W=v({__name:"RouteAfterTimeout",props:{route:{type:String,required:!0},timeoutMs:{type:Number,required:!0},warningMessage:{type:String,default:"Auto-starting slideshow... Click anywhere to stay on this page."},warningTimeMs:{type:Number,default:1e4}},setup(g){const s=b(),n=S(),t=g,{idle:a,lastActive:i}=B(t.timeoutMs),o=M({interval:1e3}),e=w(()=>t.timeoutMs-(o.value-i.value)),_=w(()=>t.warningTimeMs>e.value);let r=null;function k(){r=s.notify({progress:!0,message:t.warningMessage,type:"info",multiLine:!0,timeout:e.value,icon:"sym_o_slideshow"})}function f(){r&&r()}return C(()=>{f()}),h(_,u=>{u?k():f()}),h(a,u=>{u&&(f(),n.push({path:t.route}))}),(u,x)=>(p(),N("div"))}}),U=v({__name:"MainLayout",setup(g){const s=Q(),n=A(),t=T(),a=S(),i=$();return s.$subscribe((o,e)=>{e.state=="counting"&&i.path!="/"&&(console.log("counting state received, pushing to index page to countdown"),a.push("/")),e.state=="present_capture"&&a.push({name:"itempresenter",params:{id:s.last_captured_mediaitem_id}}),e.state=="approve_capture"&&e.ask_user_for_approval&&a.push({path:"/itemapproval"})}),(o,e)=>{const _=L("router-view");return p(),d(V,{id:"main-layout",view:"hHh lpR fFf"},{default:c(()=>[l(P,null,{default:c(()=>[l(_),m(i).path!="/"?(p(),d(O,{key:0,position:"top-left",class:"q-ma-lg",style:{}},{default:c(()=>[l(R,{id:"layout-button-back",color:"primary",rounded:"","no-caps":"",onClick:e[0]||(e[0]=r=>o.$router.back()),class:"action-button glass-effect"},{default:c(()=>[l(q,{left:"",name:"sym_o_arrow_back_ios_new"}),E("div",null,I(o.$t("BTN_LABEL_BACK")),1)]),_:1})]),_:1})):y("",!0),m(n).configuration.uisettings.enable_automatic_slideshow&&m(t).collection_number_of_items>0?(p(),d(W,{key:1,route:"/slideshow/random","timeout-ms":m(n).configuration.uisettings.show_automatic_slideshow_timeout*1e3,"warning-message":o.$t("MSG_WARN_BEFORE_AUTO_SLIDESHOW")},null,8,["timeout-ms","warning-message"])):y("",!0)]),_:1})]),_:1})}}});export{U as default};
