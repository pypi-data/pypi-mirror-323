import{s as Ve,r as B,e as h,a as Y,c as v,m as ae,g as Z,b as V,f as p,o as _,v as he,i as ne,h as d,w as $,x as ye}from"../chunks/scheduler.Bw2O2KLD.js";import{S as He,i as Te,b as q,c as ue,d as fe,m as ce,t as R,a as te,e as ke,f as pe,g as De}from"../chunks/index.Cyrvb228.js";import{S as Me,B as Le,g as Se,a as Oe,f as je}from"../chunks/utils.BXwxB8A5.js";import{D as ve}from"../chunks/Dropdown.B1LicA_3.js";import{g as oe}from"../chunks/variables.CqS7hfz2.js";function Ee(t){let a,o,D='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Data selection</button>',s,w,m,y,u,i,C="Year",I,f,H,E,W,j,k,A,Q="Node",U,T,z,M,G,P,F,J,re="Carrier",le,O,K,g,l;function r(e){t[19](e)}function n(e){t[20](e)}let c={enabled:!t[3]&&!t[2]};t[8]!==void 0&&(c.options=t[8]),t[9]!==void 0&&(c.selected_option=t[9]),f=new ve({props:c}),B.push(()=>q(f,"options",r)),B.push(()=>q(f,"selected_option",n)),f.$on("selection-changed",t[13]);function L(e){t[21](e)}function X(e){t[22](e)}let S={enabled:!t[3]&&!t[2]};t[4]!==void 0&&(S.options=t[4]),t[5]!==void 0&&(S.selected_option=t[5]),T=new ve({props:S}),B.push(()=>q(T,"options",L)),B.push(()=>q(T,"selected_option",X)),T.$on("selection-changed",t[13]);function x(e){t[23](e)}function de(e){t[24](e)}let ee={enabled:!t[3]&&!t[2]};return t[6]!==void 0&&(ee.options=t[6]),t[7]!==void 0&&(ee.selected_option=t[7]),O=new ve({props:ee}),B.push(()=>q(O,"options",x)),B.push(()=>q(O,"selected_option",de)),O.$on("selection-changed",t[13]),{c(){a=h("div"),o=h("h2"),o.innerHTML=D,s=Y(),w=h("div"),m=h("div"),y=h("div"),u=h("div"),i=h("h3"),i.textContent=C,I=Y(),ue(f.$$.fragment),W=Y(),j=h("div"),k=h("div"),A=h("h3"),A.textContent=Q,U=Y(),ue(T.$$.fragment),G=Y(),P=h("div"),F=h("div"),J=h("h3"),J.textContent=re,le=Y(),ue(O.$$.fragment),this.h()},l(e){a=v(e,"DIV",{class:!0});var b=V(a);o=v(b,"H2",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-1rnon8p"&&(o.innerHTML=D),s=Z(b),w=v(b,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var se=V(w);m=v(se,"DIV",{class:!0});var N=V(m);y=v(N,"DIV",{class:!0});var ie=V(y);u=v(ie,"DIV",{class:!0});var _e=V(u);i=v(_e,"H3",{"data-svelte-h":!0}),ae(i)!=="svelte-r9e7qt"&&(i.textContent=C),I=Z(_e),fe(f.$$.fragment,_e),_e.forEach(p),ie.forEach(p),W=Z(N),j=v(N,"DIV",{class:!0});var me=V(j);k=v(me,"DIV",{class:!0});var ge=V(k);A=v(ge,"H3",{"data-svelte-h":!0}),ae(A)!=="svelte-ocjo5w"&&(A.textContent=Q),U=Z(ge),fe(T.$$.fragment,ge),ge.forEach(p),me.forEach(p),G=Z(N),P=v(N,"DIV",{class:!0});var we=V(P);F=v(we,"DIV",{class:!0});var be=V(F);J=v(be,"H3",{"data-svelte-h":!0}),ae(J)!=="svelte-xc22hm"&&(J.textContent=re),le=Z(be),fe(O.$$.fragment,be),be.forEach(p),we.forEach(p),N.forEach(p),se.forEach(p),b.forEach(p),this.h()},h(){_(o,"class","accordion-header"),_(u,"class","col-6"),_(y,"class","row"),_(k,"class","col-6"),_(j,"class","row"),_(F,"class","col-6"),_(P,"class","row"),_(m,"class","accordion-body"),_(w,"id","collapseTwo"),_(w,"class","accordion-collapse collapse"),_(w,"data-bs-parent","#accordionExample"),_(a,"class","accordion-item")},m(e,b){ne(e,a,b),d(a,o),d(a,s),d(a,w),d(w,m),d(m,y),d(y,u),d(u,i),d(u,I),ce(f,u,null),d(m,W),d(m,j),d(j,k),d(k,A),d(k,U),ce(T,k,null),d(m,G),d(m,P),d(P,F),d(F,J),d(F,le),ce(O,F,null),l=!0},p(e,b){const se={};b&12&&(se.enabled=!e[3]&&!e[2]),!H&&b&256&&(H=!0,se.options=e[8],$(()=>H=!1)),!E&&b&512&&(E=!0,se.selected_option=e[9],$(()=>E=!1)),f.$set(se);const N={};b&12&&(N.enabled=!e[3]&&!e[2]),!z&&b&16&&(z=!0,N.options=e[4],$(()=>z=!1)),!M&&b&32&&(M=!0,N.selected_option=e[5],$(()=>M=!1)),T.$set(N);const ie={};b&12&&(ie.enabled=!e[3]&&!e[2]),!K&&b&64&&(K=!0,ie.options=e[6],$(()=>K=!1)),!g&&b&128&&(g=!0,ie.selected_option=e[7],$(()=>g=!1)),O.$set(ie)},i(e){l||(R(f.$$.fragment,e),R(T.$$.fragment,e),R(O.$$.fragment,e),l=!0)},o(e){te(f.$$.fragment,e),te(T.$$.fragment,e),te(O.$$.fragment,e),l=!1},d(e){e&&p(a),pe(f),pe(T),pe(O)}}}function Ce(t){let a,o='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){a=h("div"),a.innerHTML=o,this.h()},l(D){a=v(D,"DIV",{class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-57s7b4"&&(a.innerHTML=o),this.h()},h(){_(a,"class","text-center")},m(D,s){ne(D,a,s)},d(D){D&&p(a)}}}function Ie(t){let a,o,D,s,w;function m(i){t[25](i)}function y(i){t[26](i)}let u={zoom:!0};return t[11]!==void 0&&(u.config=t[11]),t[10]!==void 0&&(u.plot_name=t[10]),o=new Le({props:u}),B.push(()=>q(o,"config",m)),B.push(()=>q(o,"plot_name",y)),{c(){a=h("div"),ue(o.$$.fragment),this.h()},l(i){a=v(i,"DIV",{style:!0});var C=V(a);fe(o.$$.fragment,C),C.forEach(p),this.h()},h(){he(a,"position","relative")},m(i,C){ne(i,a,C),ce(o,a,null),w=!0},p(i,C){const I={};!D&&C&2048&&(D=!0,I.config=i[11],$(()=>D=!1)),!s&&C&1024&&(s=!0,I.plot_name=i[10],$(()=>s=!1)),o.$set(I)},i(i){w||(R(o.$$.fragment,i),w=!0)},o(i){te(o.$$.fragment,i),w=!1},d(i){i&&p(a),pe(o)}}}function ze(t){let a,o='<div class="col"><h2>The Energy Balance</h2></div>',D,s,w,m,y,u,i,C='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',I,f,H,E,W,j,k,A,Q,U,T,z,M,G,P;function F(n){t[14](n)}function J(n){t[15](n)}function re(n){t[16](n)}function le(n){t[17](n)}function O(n){t[18](n)}let K={enabled:!t[2]&&!t[3]};t[6]!==void 0&&(K.carriers=t[6]),t[4]!==void 0&&(K.nodes=t[4]),t[8]!==void 0&&(K.years=t[8]),t[0]!==void 0&&(K.selected_solution=t[0]),t[2]!==void 0&&(K.loading=t[2]),E=new Me({props:K}),B.push(()=>q(E,"carriers",F)),B.push(()=>q(E,"nodes",J)),B.push(()=>q(E,"years",re)),B.push(()=>q(E,"selected_solution",le)),B.push(()=>q(E,"loading",O)),E.$on("solution_selected",t[12]);let g=!t[2]&&t[0]&&Ee(t),l=t[3]&&Ce(),r=!t[3]&&t[1]&&Ie(t);return{c(){a=h("div"),a.innerHTML=o,D=Y(),s=h("div"),w=h("div"),m=h("div"),y=h("div"),u=h("div"),i=h("h2"),i.innerHTML=C,I=Y(),f=h("div"),H=h("div"),ue(E.$$.fragment),U=Y(),g&&g.c(),T=Y(),z=h("div"),M=h("div"),l&&l.c(),G=Y(),r&&r.c(),this.h()},l(n){a=v(n,"DIV",{class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-1d6fcfp"&&(a.innerHTML=o),D=Z(n),s=v(n,"DIV",{class:!0});var c=V(s);w=v(c,"DIV",{class:!0});var L=V(w);m=v(L,"DIV",{class:!0,style:!0});var X=V(m);y=v(X,"DIV",{class:!0,id:!0});var S=V(y);u=v(S,"DIV",{class:!0});var x=V(u);i=v(x,"H2",{class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-1oln34a"&&(i.innerHTML=C),I=Z(x),f=v(x,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var de=V(f);H=v(de,"DIV",{class:!0});var ee=V(H);fe(E.$$.fragment,ee),ee.forEach(p),de.forEach(p),x.forEach(p),U=Z(S),g&&g.l(S),S.forEach(p),X.forEach(p),L.forEach(p),c.forEach(p),T=Z(n),z=v(n,"DIV",{class:!0});var e=V(z);M=v(e,"DIV",{class:!0,style:!0});var b=V(M);l&&l.l(b),G=Z(b),r&&r.l(b),b.forEach(p),e.forEach(p),this.h()},h(){_(a,"class","row"),_(i,"class","accordion-header"),_(H,"class","accordion-body"),_(f,"id","collapseOne"),_(f,"class","accordion-collapse collapse show"),_(f,"data-bs-parent","#accordionExample"),_(u,"class","accordion-item solution-selection"),_(y,"class","accordion"),_(y,"id","accordionExample"),_(m,"class","filters"),he(m,"position","absolute"),he(m,"width","100%"),_(w,"class","col position-relative"),_(s,"class","row"),_(M,"class","col"),he(M,"margin-top","400px"),_(z,"class","row")},m(n,c){ne(n,a,c),ne(n,D,c),ne(n,s,c),d(s,w),d(w,m),d(m,y),d(y,u),d(u,i),d(u,I),d(u,f),d(f,H),ce(E,H,null),d(y,U),g&&g.m(y,null),ne(n,T,c),ne(n,z,c),d(z,M),l&&l.m(M,null),d(M,G),r&&r.m(M,null),P=!0},p(n,[c]){const L={};c&12&&(L.enabled=!n[2]&&!n[3]),!W&&c&64&&(W=!0,L.carriers=n[6],$(()=>W=!1)),!j&&c&16&&(j=!0,L.nodes=n[4],$(()=>j=!1)),!k&&c&256&&(k=!0,L.years=n[8],$(()=>k=!1)),!A&&c&1&&(A=!0,L.selected_solution=n[0],$(()=>A=!1)),!Q&&c&4&&(Q=!0,L.loading=n[2],$(()=>Q=!1)),E.$set(L),!n[2]&&n[0]?g?(g.p(n,c),c&5&&R(g,1)):(g=Ee(n),g.c(),R(g,1),g.m(y,null)):g&&(De(),te(g,1,1,()=>{g=null}),ke()),n[3]?l||(l=Ce(),l.c(),l.m(M,G)):l&&(l.d(1),l=null),!n[3]&&n[1]?r?(r.p(n,c),c&10&&R(r,1)):(r=Ie(n),r.c(),R(r,1),r.m(M,null)):r&&(De(),te(r,1,1,()=>{r=null}),ke())},i(n){P||(R(E.$$.fragment,n),R(g),R(r),P=!0)},o(n){te(E.$$.fragment,n),te(g),te(r),P=!1},d(n){n&&(p(a),p(D),p(s),p(T),p(z)),pe(E),g&&g.d(),l&&l.d(),r&&r.d()}}}function Pe(t,a,o){var D=["rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 99, 132)","rgb(201, 203, 207)","rgb(220,20,60)","rgb(255,99,71)","rgb(255,69,0)","rgb(154,205,50)","rgb(0,100,0)","rgb(50,205,50)","rgb(0,139,139)","rgb(153,50,204)","rgb(255,105,180)"];let s=null,w=!1,m=!1,y=!1,u=[],i=null,C=[],I=null,f=[],H=null,E="",W="";const j={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};let k=structuredClone(j);async function A(){s&&(o(11,k=structuredClone(j)),o(5,i=u[0]),o(7,I=C[0]),o(9,H=f[0]),o(1,w=!1),await Q())}async function Q(){if(o(3,y=!0),ye(),i==null||I==null||H==null||s==null){o(3,y=!1);return}let l=Math.floor((H-s.detail.system.reference_year)/s.detail.system.interval_between_years),r=await Se(s.solution_name,i,I,s.scenario_name,l),n=await Oe(s.solution_name,oe("flow_export",s.version),s.scenario_name);n===null?E="":E=n.data[0][0];let c=[],L=0;for(const S in r){let x={node:[i]};if(r[S]==null||r[S].data.length==0)continue;if("technology"in r[S].data[0]){let e=[];for(const b of r[S].data)e.push(b.technology);x={technology:e}}let de={},ee=je(r[S].data,x,de);if(ee.length!=0)for(let e of ee){if(Object.keys(e.data).length==0)continue;switch(S){case oe("flow_storage_discharge",s.version):e.label=e.label+" (discharge)";break;case oe("flow_transport_in",s.version):e.label=e.label+" (transport in)";break;case oe("flow_import",s.version):e.label="Import",s.version;break;case oe("shed_demand",s.version):e.label="Shed Demand";break;case oe("flow_storage_charge",s.version):e.label=e.label+" (charge)";break;case oe("flow_transport_out",s.version):e.label=e.label+" (transport out)";break;case oe("flow_export",s.version):e.label="Export";break}let b="line";Object.keys(e.data).length==1&&(b="bar"),S=="demand"?(e.label="Demand",e.type="line",e.stack="ownCustomStack",e.fill=!1,e.borderColor="black",e.backgroundColor="white",e.borderWidth=2,e.stepped=!0,Object.keys(e.data).length==1&&(e.pointRadius=2)):(e.type=b,e.fill="origin",e.borderColor=D[L%D.length],e.backgroundColor=D[L%D.length].replace(")",", 1)"),e.stepped=!0,e.cubicInterpolationMode="monotone"),c.push(e),L++}}o(11,k.data.labels=Object.keys(c[0].data),k),o(11,k.data.datasets=c,k),o(11,k.options.scales.y.title.text="Power ["+E+"]",k),o(3,y=!1),o(1,w=!0),await ye();let X=s.solution_name.split(".");o(10,W=[X[(X==null?void 0:X.length)-1],s==null?void 0:s.scenario_name,"balance",I,i,H].join("_"))}function U(l){C=l,o(6,C)}function T(l){u=l,o(4,u)}function z(l){f=l,o(8,f)}function M(l){s=l,o(0,s)}function G(l){m=l,o(2,m)}function P(l){f=l,o(8,f)}function F(l){H=l,o(9,H)}function J(l){u=l,o(4,u)}function re(l){i=l,o(5,i)}function le(l){C=l,o(6,C)}function O(l){I=l,o(7,I)}function K(l){k=l,o(11,k)}function g(l){W=l,o(10,W)}return[s,w,m,y,u,i,C,I,f,H,W,k,A,Q,U,T,z,M,G,P,F,J,re,le,O,K,g]}class Fe extends He{constructor(a){super(),Te(this,a,Pe,ze,Ve,{})}}export{Fe as component};
