import{s as Me,r as U,e as k,a as Z,c as w,m as W,g as G,b as B,f as _,o as m,v as oe,i as H,h as E,w as X,y as ke,t as be,d as me,z as Ne,A as we,B as Ce,j as Se,C as Oe,D as je,E as ye,F as ze,n as O}from"../chunks/scheduler.Bw2O2KLD.js";import{S as Ae,i as qe,b as x,c as se,d as ae,m as ie,t as K,a as J,e as _e,f as re,g as he}from"../chunks/index.Cyrvb228.js";import{e as De}from"../chunks/each.D6YF6ztN.js";import{S as Be,f as Pe,B as Fe,b as Ke}from"../chunks/utils.CbDfvwSi.js";import{A as We}from"../chunks/AllCheckbox.dzwR-lxb.js";import{D as Ye}from"../chunks/Dropdown.B1LicA_3.js";import{g as Ze}from"../chunks/variables.CqS7hfz2.js";import{T as Ge}from"../chunks/ToggleButton.CgFO1nKI.js";function Ee(n,e,t){const l=n.slice();return l[39]=e[t],l}function Ie(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button>',o,c,i,g,s,C,f=n[2].length>0&&Ve(n),b=n[0]&&n[6]&&n[4].length>0&&n[3].length>0&&He(n);return{c(){e=k("div"),t=k("h2"),t.innerHTML=l,o=Z(),c=k("div"),i=k("div"),f&&f.c(),g=Z(),b&&b.c(),s=ke(),this.h()},l(r){e=w(r,"DIV",{class:!0});var d=B(e);t=w(d,"H2",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-18ejqb9"&&(t.innerHTML=l),o=G(d),c=w(d,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var I=B(c);i=w(I,"DIV",{class:!0});var T=B(i);f&&f.l(T),T.forEach(_),I.forEach(_),d.forEach(_),g=G(r),b&&b.l(r),s=ke(),this.h()},h(){m(t,"class","accordion-header"),m(i,"class","accordion-body"),m(c,"id","collapseTwo"),m(c,"class","accordion-collapse collapse"),m(c,"data-bs-parent","#accordionExample"),m(e,"class","accordion-item variable-selction")},m(r,d){H(r,e,d),E(e,t),E(e,o),E(e,c),E(c,i),f&&f.m(i,null),H(r,g,d),b&&b.m(r,d),H(r,s,d),C=!0},p(r,d){r[2].length>0?f?(f.p(r,d),d[0]&4&&K(f,1)):(f=Ve(r),f.c(),K(f,1),f.m(i,null)):f&&(he(),J(f,1,1,()=>{f=null}),_e()),r[0]&&r[6]&&r[4].length>0&&r[3].length>0?b?(b.p(r,d),d[0]&89&&K(b,1)):(b=He(r),b.c(),K(b,1),b.m(s.parentNode,s)):b&&(he(),J(b,1,1,()=>{b=null}),_e())},i(r){C||(K(f),K(b),C=!0)},o(r){J(f),J(b),C=!1},d(r){r&&(_(e),_(g),_(s)),f&&f.d(),b&&b.d(r)}}}function Ve(n){let e,t="Carrier",l,o,c,i=(n[9]||n[8])+"",g,s,C,f,b="Year",r,d,I,T,q,F,V,L=De(n[2]),h=[];for(let a=0;a<L.length;a+=1)h[a]=Te(Ee(n,L,a));function P(a){n[23](a)}function z(a){n[24](a)}let S={enabled:!n[9]&&!n[8]};return n[12]!==void 0&&(S.options=n[12]),n[13]!==void 0&&(S.selected_option=n[13]),d=new Ye({props:S}),U.push(()=>x(d,"options",P)),U.push(()=>x(d,"selected_option",z)),d.$on("selection-changed",n[16]),{c(){e=k("h3"),e.textContent=t,l=Z(),o=k("select");for(let a=0;a<h.length;a+=1)h[a].c();c=be(`
                                        disabled=`),g=be(i),C=Z(),f=k("h3"),f.textContent=b,r=Z(),se(d.$$.fragment),this.h()},l(a){e=w(a,"H3",{"data-svelte-h":!0}),W(e)!=="svelte-xc22hm"&&(e.textContent=t),l=G(a),o=w(a,"SELECT",{});var D=B(o);for(let M=0;M<h.length;M+=1)h[M].l(D);c=me(D,`
                                        disabled=`),g=me(D,i),D.forEach(_),C=G(a),f=w(a,"H3",{"data-svelte-h":!0}),W(f)!=="svelte-r9e7qt"&&(f.textContent=b),r=G(a),ae(d.$$.fragment,a),this.h()},h(){o.disabled=s=n[9]||n[8],n[6]===void 0&&Ne(()=>n[22].call(o))},m(a,D){H(a,e,D),H(a,l,D),H(a,o,D);for(let M=0;M<h.length;M+=1)h[M]&&h[M].m(o,null);E(o,c),E(o,g),we(o,n[6],!0),H(a,C,D),H(a,f,D),H(a,r,D),ie(d,a,D),q=!0,F||(V=[Ce(o,"change",n[22]),Ce(o,"change",n[16])],F=!0)},p(a,D){if(D[0]&4){L=De(a[2]);let p;for(p=0;p<L.length;p+=1){const N=Ee(a,L,p);h[p]?h[p].p(N,D):(h[p]=Te(N),h[p].c(),h[p].m(o,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=L.length}(!q||D[0]&768)&&i!==(i=(a[9]||a[8])+"")&&Se(g,i),(!q||D[0]&768&&s!==(s=a[9]||a[8]))&&(o.disabled=s),D[0]&68&&we(o,a[6]);const M={};D[0]&768&&(M.enabled=!a[9]&&!a[8]),!I&&D[0]&4096&&(I=!0,M.options=a[12],X(()=>I=!1)),!T&&D[0]&8192&&(T=!0,M.selected_option=a[13],X(()=>T=!1)),d.$set(M)},i(a){q||(K(d.$$.fragment,a),q=!0)},o(a){J(d.$$.fragment,a),q=!1},d(a){a&&(_(e),_(l),_(o),_(C),_(f),_(r)),Oe(h,a),re(d,a),F=!1,je(V)}}}function Te(n){let e,t=n[39]+"",l,o;return{c(){e=k("option"),l=be(t),this.h()},l(c){e=w(c,"OPTION",{});var i=B(e);l=me(i,t),i.forEach(_),this.h()},h(){e.__value=o=n[39],ye(e,e.__value)},m(c,i){H(c,e,i),E(e,l)},p(c,i){i[0]&4&&t!==(t=c[39]+"")&&Se(l,t),i[0]&4&&o!==(o=c[39])&&(e.__value=o,ye(e,e.__value))},d(c){c&&_(e)}}}function He(n){let e,t,l='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button>',o,c,i,g,s,C,f="Technology Subdivision",b,r,d,I,T,q="Node",F,V,L,h,P;function z(p){n[25](p)}let S={};n[11]!==void 0&&(S.value=n[11]),r=new Ge({props:S}),U.push(()=>x(r,"value",z)),r.$on("change",n[17]);function a(p){n[26](p)}function D(p){n[27](p)}let M={};return n[7]!==void 0&&(M.selected_elements=n[7]),n[3]!==void 0&&(M.elements=n[3]),V=new We({props:M}),U.push(()=>x(V,"selected_elements",a)),U.push(()=>x(V,"elements",D)),V.$on("selection-changed",n[17]),{c(){e=k("div"),t=k("h2"),t.innerHTML=l,o=Z(),c=k("div"),i=k("div"),g=k("div"),s=Z(),C=k("h3"),C.textContent=f,b=Z(),se(r.$$.fragment),I=Z(),T=k("h3"),T.textContent=q,F=Z(),se(V.$$.fragment),this.h()},l(p){e=w(p,"DIV",{class:!0});var N=B(e);t=w(N,"H2",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1btd1mx"&&(t.innerHTML=l),o=G(N),c=w(N,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var y=B(c);i=w(y,"DIV",{class:!0});var A=B(i);g=w(A,"DIV",{class:!0}),B(g).forEach(_),s=G(A),C=w(A,"H3",{"data-svelte-h":!0}),W(C)!=="svelte-q2zoen"&&(C.textContent=f),b=G(A),ae(r.$$.fragment,A),I=G(A),T=w(A,"H3",{"data-svelte-h":!0}),W(T)!=="svelte-ocjo5w"&&(T.textContent=q),F=G(A),ae(V.$$.fragment,A),A.forEach(_),y.forEach(_),N.forEach(_),this.h()},h(){m(t,"class","accordion-header"),m(g,"class","row"),m(i,"class","accordion-body"),m(c,"id","collapseThree"),m(c,"class","accordion-collapse collapse"),m(c,"data-bs-parent","#accordionExample"),m(e,"class","accordion-item")},m(p,N){H(p,e,N),E(e,t),E(e,o),E(e,c),E(c,i),E(i,g),E(i,s),E(i,C),E(i,b),ie(r,i,null),E(i,I),E(i,T),E(i,F),ie(V,i,null),P=!0},p(p,N){const y={};!d&&N[0]&2048&&(d=!0,y.value=p[11],X(()=>d=!1)),r.$set(y);const A={};!L&&N[0]&128&&(L=!0,A.selected_elements=p[7],X(()=>L=!1)),!h&&N[0]&8&&(h=!0,A.elements=p[3],X(()=>h=!1)),V.$set(A)},i(p){P||(K(r.$$.fragment,p),K(V.$$.fragment,p),P=!0)},o(p){J(r.$$.fragment,p),J(V.$$.fragment,p),P=!1},d(p){p&&_(e),re(r),re(V)}}}function Je(n){let e,t,l,o;function c(s){n[28](s)}function i(s){n[29](s)}let g={zoom:!0};return n[14]!==void 0&&(g.config=n[14]),n[10]!==void 0&&(g.plot_name=n[10]),e=new Fe({props:g}),U.push(()=>x(e,"config",c)),U.push(()=>x(e,"plot_name",i)),{c(){se(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,C){ie(e,s,C),o=!0},p(s,C){const f={};!t&&C[0]&16384&&(t=!0,f.config=s[14],X(()=>t=!1)),!l&&C[0]&1024&&(l=!0,f.plot_name=s[10],X(()=>l=!1)),e.$set(f)},i(s){o||(K(e.$$.fragment,s),o=!0)},o(s){J(e.$$.fragment,s),o=!1},d(s){re(e,s)}}}function Qe(n){let e,t="No data with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function Re(n){let e,t="No locations with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-tr8mx7"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function Ue(n){let e,t="No data with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function Xe(n){let e,t="No solution selected.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-17x0k81"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function xe(n){let e,t="No carriers with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1wht3n0"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function $e(n){let e,t="No technologies with this selection.";return{c(){e=k("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1ontq7"&&(e.textContent=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function et(n){let e,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-57s7b4"&&(e.innerHTML=t),this.h()},h(){m(e,"class","text-center")},m(l,o){H(l,e,o)},p:O,i:O,o:O,d(l){l&&_(e)}}}function tt(n){let e,t='<div class="col"><h2>The Energy Balance Storage</h2></div>',l,o,c,i,g,s,C,f='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',b,r,d,I,T,q,F,V,L,h,P,z,S,a;function D(u){n[18](u)}function M(u){n[19](u)}function p(u){n[20](u)}let N={enabled:!n[9]&&!n[8]};n[5]!==void 0&&(N.selected_solution=n[5]),n[8]!==void 0&&(N.loading=n[8]),n[12]!==void 0&&(N.years=n[12]),I=new Be({props:N}),U.push(()=>x(I,"selected_solution",D)),U.push(()=>x(I,"loading",M)),U.push(()=>x(I,"years",p)),I.$on("solution_selected",n[21]);let y=!n[8]&&n[5]&&Ie(n);const A=[et,$e,xe,Xe,Ue,Re,Qe,Je],Q=[];function ce(u,j){return u[8]||u[9]?0:u[4].length==0?1:u[2].length==0?2:u[5]==null?3:u[1]==null?4:u[3].length==0?5:u[1].length==0?6:7}return z=ce(n),S=Q[z]=A[z](n),{c(){e=k("div"),e.innerHTML=t,l=Z(),o=k("div"),c=k("div"),i=k("div"),g=k("div"),s=k("div"),C=k("h2"),C.innerHTML=f,b=Z(),r=k("div"),d=k("div"),se(I.$$.fragment),V=Z(),y&&y.c(),L=Z(),h=k("div"),P=k("div"),S.c(),this.h()},l(u){e=w(u,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-wp6wh4"&&(e.innerHTML=t),l=G(u),o=w(u,"DIV",{class:!0,style:!0});var j=B(o);c=w(j,"DIV",{class:!0});var R=B(c);i=w(R,"DIV",{class:!0,style:!0});var $=B(i);g=w($,"DIV",{class:!0,id:!0});var ee=B(g);s=w(ee,"DIV",{class:!0});var te=B(s);C=w(te,"H2",{class:!0,"data-svelte-h":!0}),W(C)!=="svelte-1oln34a"&&(C.innerHTML=f),b=G(te),r=w(te,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ue=B(r);d=w(ue,"DIV",{class:!0});var de=B(d);ae(I.$$.fragment,de),de.forEach(_),ue.forEach(_),te.forEach(_),V=G(ee),y&&y.l(ee),ee.forEach(_),$.forEach(_),R.forEach(_),j.forEach(_),L=G(u),h=w(u,"DIV",{class:!0,style:!0});var fe=B(h);P=w(fe,"DIV",{class:!0});var v=B(P);S.l(v),v.forEach(_),fe.forEach(_),this.h()},h(){m(e,"class","row"),m(C,"class","accordion-header"),m(d,"class","accordion-body"),m(r,"id","collapseOne"),m(r,"class","accordion-collapse collapse show"),m(r,"data-bs-parent","#accordionExample"),m(s,"class","accordion-item solution-selection"),m(g,"class","accordion"),m(g,"id","accordionExample"),m(i,"class","filters"),oe(i,"position","absolute"),oe(i,"width","100%"),m(c,"class","col position-relative"),m(o,"class","row"),oe(o,"z-index","1"),oe(o,"position","relative"),m(P,"class","row"),m(h,"class","col"),oe(h,"margin-top","400px")},m(u,j){H(u,e,j),H(u,l,j),H(u,o,j),E(o,c),E(c,i),E(i,g),E(g,s),E(s,C),E(s,b),E(s,r),E(r,d),ie(I,d,null),E(g,V),y&&y.m(g,null),H(u,L,j),H(u,h,j),E(h,P),Q[z].m(P,null),a=!0},p(u,j){const R={};j[0]&768&&(R.enabled=!u[9]&&!u[8]),!T&&j[0]&32&&(T=!0,R.selected_solution=u[5],X(()=>T=!1)),!q&&j[0]&256&&(q=!0,R.loading=u[8],X(()=>q=!1)),!F&&j[0]&4096&&(F=!0,R.years=u[12],X(()=>F=!1)),I.$set(R),!u[8]&&u[5]?y?(y.p(u,j),j[0]&288&&K(y,1)):(y=Ie(u),y.c(),K(y,1),y.m(g,null)):y&&(he(),J(y,1,1,()=>{y=null}),_e());let $=z;z=ce(u),z===$?Q[z].p(u,j):(he(),J(Q[$],1,1,()=>{Q[$]=null}),_e(),S=Q[z],S?S.p(u,j):(S=Q[z]=A[z](u),S.c()),K(S,1),S.m(P,null))},i(u){a||(K(I.$$.fragment,u),K(y),K(S),a=!0)},o(u){J(I.$$.fragment,u),J(y),J(S),a=!1},d(u){u&&(_(e),_(l),_(o),_(L),_(h)),re(I),y&&y.d(),Q[z].d()}}}let ge="storage_level";function lt(n,e,t){let l=null,o=null,c=[],i=[],g=[],s=null,C=null,f=null,b="technology",r=[],d=[],I=!1,T=!1,q="",F=!0,V=[],L=0,h={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};function P(){t(7,d=i),r=g,b="node"}async function z(){if(t(0,l=null),s===null)return;let v=Math.floor((L-s.detail.system.reference_year)/s.detail.system.interval_between_years),Y=await Ke(s.solution_name,Ze(ge),s.scenario_name,v);t(0,l=Y.data),C=Y.unit}async function S(){s!==null&&(t(9,T=!0),t(13,L=V[0]),await z(),p(),N(),D(),P(),y(),t(9,T=!1))}async function a(){t(9,T=!0),await z(),N(),D(),P(),y(),t(9,T=!1)}function D(){t(3,i=Array.from(new Set(l.data.map(v=>v.node)))),t(7,d=i)}function M(){try{return C.data[0][0]}catch{return""}}function p(){if(t(2,c=[]),!l)return;let v=Array.from(l.data.map(Y=>Y.technology));l.data.forEach(Y=>{let le=Y.technology,ne=s.detail.reference_carrier[le];!c.includes(ne)&&v.includes(Y.technology)&&c.push(ne)}),c.length>0&&t(6,f=c[0])}function N(){let v=Array.from(new Set(l.data.map(Y=>Y.technology)));t(4,g=v.filter(Y=>(s==null?void 0:s.detail.reference_carrier[Y])==f)),r=g}function y(){if(b=="technology"?t(7,d=i):r=g,d.length==0||r.length==0||l===null){t(1,o=null);return}let v={},Y={};if(v.technology=r,Y.node=d,t(1,o=Pe(l.data,v,Y,[],!1,"line")),t(14,h.data={datasets:o,labels:Object.keys(o[0].data)},h),!F){let ne={};for(const ve in o[0].data)ne[ve]=o.map(pe=>pe.data[ve]).reduce((pe,Le)=>pe+Le,0);t(1,o=[{data:Object.values(ne),label:"Storage level",type:"line",borderColor:"black"}]),t(14,h.data={datasets:o,labels:Object.keys(ne)},h)}t(14,h.options.scales.y.title.text=ge+" ["+M()+"]",h);let le=s.solution_name.split(".");t(10,q=[le[(le==null?void 0:le.length)-1],s==null?void 0:s.scenario_name,ge,f].join("_"))}function A(v){s=v,t(5,s)}function Q(v){I=v,t(8,I)}function ce(v){V=v,t(12,V)}const u=()=>{S()};function j(){f=ze(this),t(6,f),t(2,c)}function R(v){V=v,t(12,V)}function $(v){L=v,t(13,L)}function ee(v){F=v,t(11,F)}function te(v){d=v,t(7,d)}function ue(v){i=v,t(3,i)}function de(v){h=v,t(14,h)}function fe(v){q=v,t(10,q)}return[l,o,c,i,g,s,f,d,I,T,q,F,V,L,h,S,a,y,A,Q,ce,u,j,R,$,ee,te,ue,de,fe]}class dt extends Ae{constructor(e){super(),qe(this,e,lt,tt,Me,{},null,[-1,-1])}}export{dt as component};
