import{u as N,Q as T}from"./use-meta-esVcmY9-.js";import{u as z}from"./use-quasar-DIyiPK_7.js";import{u as A,a as I,Q as p}from"./token-CD4pT9Np.js";import{a as P,r,o as B,w as y,Z as x,_ as C,a1 as e,a2 as t,C as h,a4 as u,a0 as o,a3 as c,a8 as i,$ as k,am as D,ac as L,aj as M,e as R,a6 as F}from"./index-IeoOg5zr.js";import{s as K,t as E}from"./QItemLabel-CbyM2hRg.js";import{Q as H,a as O,b as W}from"./QTable-DJjAk4kv.js";import{get as Z}from"./axios-CgW1QSEu.js";import{u as J}from"./vue-i18n.runtime-zCaoNujM.js";const X={class:"q-pa-md"},Y={key:0},ee={key:1},ae={__name:"UserList",setup(S){const{t:a}=J(),d=z(),m=A(),Q=P(()=>[{name:"username",required:!0,label:a("username"),align:"left",field:"username"},{name:"email",align:"center",label:a("email"),field:"email"},{name:"date_joined",label:a("date_joined"),field:"date_joined"},{name:"last_login",label:a("last_login"),field:"last_login"},{name:"updated_time",label:a("updated_time"),field:"updated_time"},{name:"action",label:a("action"),align:"right"}]),v=r([]),g=r(""),w=r(0),b=r({page:1,rowsPerPage:1,rowsNumber:1}),$=P(()=>V.value!==""?Math.ceil(w.value/b.value.rowsPerPage):0),q=r(d.screen.height*.73+"px"),G=r(d.screen.width*.825+"px"),U=r(d.dark.isActive?"#121212":"#ffffff"),V=P(()=>m.token);function _(l){let s={};l?s=l:s.pagination=b.value,m.userPermissionGet("Get User List")&&(Z({url:"core/user/",params:{search:g.value,page:s.pagination.page,max_page:s.pagination.rowsPerPage}}).then(n=>{v.value=n.results,w.value=n.count}).catch(n=>Promise.reject(n)),b.value=s.pagination)}function j(l){console.log("pageChange",l)}return B(()=>{_()}),y(()=>d.dark.isActive,l=>{U.value=l?"#121212":"#ffffff"}),y(()=>b.value,l=>{console.log("watch",l.sortBy)}),y(()=>V.value,l=>{l===""?(v.value=[],w.value=0):_()}),(l,s)=>(x(),C("div",X,[e(W,{class:M(o(d).dark.isActive?"my-sticky-header-last-column-table-dark":"my-sticky-header-last-column-table"),flat:"",bordered:"",rows:v.value,columns:Q.value,"row-key":"name",pagination:b.value,separator:"cell","no-data-label":o(a)("nodata"),"rows-per-page-label":o(a)("per_page"),"rows-per-page-options":[1,10,30,50,200,0],"table-style":{height:q.value,width:G.value},"card-style":{backgroundColor:U.value},onRequest:_},{top:t(n=>[e(I,{flat:""},{default:t(()=>[h(e(u,{label:o(a)("refresh"),icon:"refresh",onClick:s[0]||(s[0]=f=>_())},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("refreshdata")),1)]),_:1})]),_:1},8,["label"]),[[k,o(m).userPermissionGet("Get User List")]]),h(e(u,{label:o(a)("new"),icon:"add"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("newUser")),1)]),_:1})]),_:1},8,["label"]),[[k,o(m).userPermissionGet("Create One User")]])]),_:1}),e(K),e(E,{dense:"",debounce:"300",color:"primary",modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=f=>g.value=f),onInput:s[2]||(s[2]=f=>_()),onKeyup:s[3]||(s[3]=D(f=>_(),["enter"]))},{append:t(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"]),e(u,{flat:"",round:"",dense:"",icon:n.inFullscreen?"fullscreen_exit":"fullscreen",onClick:n.toggleFullscreen},null,8,["icon","onClick"])]),"body-cell":t(n=>[e(H,{props:n},{default:t(()=>[n.col.name==="action"?(x(),C("div",Y,[e(u,{round:"",flat:"",icon:"published_with_changes"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("changepassword")),1)]),_:1})]),_:1}),e(u,{round:"",flat:"",icon:"admin_panel_settings"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("permission")),1)]),_:1})]),_:1}),h(e(u,{round:"",flat:"",icon:"lock_person"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("isnotactive")),1)]),_:1})]),_:2},1536),[[k,!n.row.is_active]]),h(e(u,{round:"",flat:"",icon:"lock_open"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("isactive")),1)]),_:1})]),_:2},1536),[[k,n.row.is_active]]),e(u,{round:"",flat:"",icon:"delete_sweep"},{default:t(()=>[e(p,{class:"bg-indigo",offset:[10,10],"content-style":"font-size: 12px"},{default:t(()=>[c(i(o(a)("deleteuser")),1)]),_:1})]),_:1})])):(x(),C("div",ee,i(n.value),1))]),_:2},1032,["props"])]),pagination:t(n=>[c(i(o(a)("total"))+i($.value)+" "+i(o(a)("page"))+" ",1),e(O,{modelValue:n.pagination.page,"onUpdate:modelValue":[f=>n.pagination.page=f,f=>j(n)],max:n.pagesNumber,input:"","input-class":"text-orange-10"},null,8,["modelValue","onUpdate:modelValue","max"])]),_:1},8,["class","rows","columns","pagination","no-data-label","rows-per-page-label","table-style","card-style"])]))}},ce={__name:"UserReader",setup(S){const a=z(),d=r(!1),m=r("1111"),Q=r(""),v=r("");return N(()=>({title:m.value,meta:{description:{name:"description",content:Q.value},keywords:{name:"keywords",content:v.value}}})),B(()=>{}),R(()=>{}),y(()=>a.dark.isActive,g=>{d.value=g}),(g,w)=>(x(),F(T,{class:"flex flex-top"},{default:t(()=>[e(ae)]),_:1}))}};export{ce as default};
