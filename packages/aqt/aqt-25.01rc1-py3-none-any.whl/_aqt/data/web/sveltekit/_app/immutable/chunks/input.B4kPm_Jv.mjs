import{i,B as w,C as n,h as u,D as q,q as C}from"./runtime.9HYTEYPq.mjs";import{l as b}from"./store.CPnfR7A8.mjs";import{i as A}from"./props.DYb31JuL.mjs";function V(e,c,a=c){var d=i();b(e,"input",r=>{var v=r?e.defaultValue:e.value;if(v=k(e)?m(v):v,a(v),d&&v!==(v=c())){var f=e.selectionStart,s=e.selectionEnd;e.value=v!=null?v:"",s!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(s,e.value.length))}}),(u&&e.defaultValue!==e.value||w(c)==null&&e.value)&&a(k(e)?m(e.value):e.value),n(()=>{var r=c();k(e)&&r===m(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r!=null?r:"")})}const _=new Set;function g(e,c,a,d,r=d){var t;var v=a.getAttribute("type")==="checkbox",f=e;let s=!1;if(c!==null)for(var h of c)f=(t=f[h])!=null?t:f[h]=[];f.push(a),b(a,"change",()=>{var l=a.__value;v&&(l=S(f,l,a.checked)),r(l)},()=>r(v?[]:null)),n(()=>{var l=d();if(u&&a.defaultChecked!==a.checked){s=!0;return}v?(l=l||[],a.checked=l.includes(a.__value)):a.checked=A(a.__value,l)}),q(()=>{var l=f.indexOf(a);l!==-1&&f.splice(l,1)}),_.has(f)||(_.add(f),C(()=>{f.sort((l,o)=>l.compareDocumentPosition(o)===4?-1:1),_.delete(f)})),C(()=>{if(s){var l;if(v)l=S(f,l,a.checked);else{var o=f.find(y=>y.checked);l=o==null?void 0:o.__value}r(l)}})}function M(e,c,a=c){b(e,"change",d=>{var r=d?e.defaultChecked:e.checked;a(r)}),(u&&e.defaultChecked!==e.checked||w(c)==null)&&a(e.checked),n(()=>{var d=c();e.checked=!!d})}function S(e,c,a){for(var d=new Set,r=0;r<e.length;r+=1)e[r].checked&&d.add(e[r].__value);return a||d.delete(c),Array.from(d)}function k(e){var c=e.type;return c==="number"||c==="range"}function m(e){return e===""?null:+e}export{V as a,g as b,M as c};
