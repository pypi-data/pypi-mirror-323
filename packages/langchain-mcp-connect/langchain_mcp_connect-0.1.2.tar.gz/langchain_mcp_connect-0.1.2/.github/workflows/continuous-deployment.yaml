# This is a basic workflow to help you get started with Actions
name: Continuous Deployment

# Controls when the action will run. Invokes the workflow on push events but only for the main branch
on:
  workflow_dispatch:

permissions:
  id-token: write # This is required for requesting credentials for trusted publishers
  contents: write # This is required for actions/checkout

jobs:
  publish-pypi:
    name: Publish to PyPI
    runs-on: ubuntu-latest
    environment: pypi
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install dependencies
        uses: astral-sh/setup-uv@v5
        with:
          enable-cache: true
          version: 0.5.24

      - name: Set up Python
        run: uv python install

      - name: Build and publish
        run: |
          uv build
          uv publish

      - name: Release
        uses: softprops/action-gh-release@v2